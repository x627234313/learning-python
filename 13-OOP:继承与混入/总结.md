# 继承
- 定义：`class Child(Father)`，Child是Father的子类或派生类，Father是Child是父类、超类或基类
- 基类是子类更高层次的抽象：它们抽象级别(层次)不同，子类相对基类是更具象的东西，例如：基类Animal和子类Dog，子类Dog还可以继续派生(更加具象)
- 基于父类定制扩展：可以复用父类代码，并继续扩展，子类和父类可能处于同一级别，可能处于不同级别
- 屏蔽底层复杂性(计算、控制、存储)：对于比较复杂方法(计算、控制、存储)，在父类中实现，子类只需调用即可，而不去管如何实现，在设计框架中比较常见。
  而继承也是实现控制反转的一种方式。
  
# 多重继承
缺点：结构复杂化、优先顺序模糊、属性冲突
- MRO：子类先于父类，多个父类按传参顺序，同名属性选第一个父类
  - `cls.__mro__`，使用`类名.__mro__`查看多继承解析顺序
- super()函数
  - 还可以跳过MRO的解析顺序，例如：`class C(A, B)`，A、B类中都有`test()`方法，C的实例想调用B类中的`test()`方法，可以在A类中使用`super()`函数
```Python
  class A:
      def test(self):
          print('This is A')
          super().test()
  
  class B:
      def test(self):
          print('This is B')
  
  class C(A, B):
      pass
  
  
  C.__mro__
  # (<class '__main__.C'>, <class '__main__.A'>, <class '__main__.B'>, <class 'object'>)
  c = C()
  c.test()
  # This is A
  # This is B
```
# 正确处理继承
- 接口继承和实现继承分开
  - 接口继承：约束模型实现，用父类来约束子类实现，作为接口形式的存在
  - 实现继承：复用公共代码，子类直接复用父类中的方法
- 使用抽象基类表示接口
- 不子类化多个具体类，即尽量不要用具体类做基类
  - `class Child(Father1, Father2, )`，Father1、Father2...类尽量只有一个具体类，最好零个
- 优先使用组合对象、混入模式，其次考虑使用单继承、多继承
  - 组合对象：举个例子一辆汽车，由车体、轮胎、引擎等部件组成，这个例子中使用继承就不合适，汽车不能继承轮胎、不能继承引擎，只有把这几部分组合在一起才是一辆汽车

# 混入模式
- 混入类是一种用于被组合或被打包的类
- 每个混入类提供特定的数据和行为，命名明确，结尾`MixIn`
- 抽象基类可以当混入类使用，混入类不可做抽象基类
- 混入类不要被直接实例化，没有`__init__()`方法，实例化无意义
- 适当使用`__slots__`，优化混入类内存占用
  - 默认情况，`Pthon`在各个实例中名为`__dict__`的字典中存储实例属性，为了使用底层的散列表提升访问速度，字典会消耗大量内存。通过`__slots__`类属性，让解释器在元组中存储实例属性，节省大量内存。
  - 定义`__slots__`方式是，创建一个类属性，`__slots__ = ('__x', '__y', 'name', 'age')`，值设为一个字符串构成的可迭代对象，推荐使用元组
  - 在类中定义`__slots__`属性之后，实例不能再有`__slots__`中所列名称之外的其他属性。这只是一个副作用，不是`__slots__`存在的真正原因。`__slots__`是用于优化的。
  - 为了让对象支持弱引用，必须有`__weakref__`属性。如果类中定义了`__slots__`属性，而且想把实例作为弱引用的目标，那么要把`__weakref__`添加到`__slots__`中
```Python
class Date:
    __slots__ = ('year', 'month', 'day')
    def __init__(self, year, month, day):
        self.year = year
        self.month = month
        self.day = day
```
## `__slots__`的问题
- 每个子类都要定义`__slots__`属性，因为解释器会忽略继承的`__slots__`属性。
- 实例只能拥有`__slots__`中列出的属性，除非把`__dict__`加入`__slots__`中(这样会失去节省内存的功效)。
- 如果不把`__weakref__`加入`__slots__`，实例就不能作为弱引用的目标。
