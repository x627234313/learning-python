# 1.3.1 环境
一个求值表达式的环境由一系列的框架组成。每个框架都包含绑定，这些绑定将一个名称与其相应的值相关联。

赋值和导入语句添加条目到当前环境的第一个框架中。 到目前为止，我们的环境只包含全局框架。

一个`def`语句也绑定一个名称到定义时创建的函数上。

![]()
注意函数的名称是可重复的，一次的框架中，一次作为函数本身的一部分。这种重复是故意的：许多不同的名称可能指向相同的函数，但是函数本身只有一个内部名称。
但是，在环境中查找名称的值只会检查名称绑定。 函数的内部名称在查找名称时不起作用。

__New environment Features__：Assignment and user-defined function definition.  
（assignment：分配 任务 作业）  
新环境特点：赋值和用户定义的函数定义。

# 1.3.2 调用用户定义的函数
求值一个调用表达式，其运算符命名用户定义的函数，Python解释器按照相似的过程对于使用内建运算符函数求值的表达式。也就是说，解释器对操作数表达式求值，然后将命名函数应用到结果参数。

应用用户定义函数的行为引入了第二个本地框架，这个框架只能被该函数访问。应用用户定义函数的一些理由：
1. 将参数绑定到新的本地框架中函数形参的名称上
2. 从该框架开始到全局框架结束，在这个环境中求函数体的值。

求值主体的环境由两个框架组成：首先是本地框架包含参数绑定，然后是全局框架包含其他所有内容。 函数应用程序的每个实例都有自己独立的本地框架。

![]()
这个图包含了Python解释器的两个不同方面：当前的环境，以及与正在求值的当前代码行相关的表达式树的一部分。 我们已经描述了一个调用表达式的求值，它有用户定义的函数（蓝色部分）作为两部分圆角矩形。 虚线箭头表示哪个环境被用于每个部分的求值表达式。
- 蓝色的上半部分显示正在求值的调用表达式。这个调用表达式不是任何函数的内部，所以它在全局环境中求值。 因此，在全局框架中查找其中的任何名称（例如`square`）。
- 蓝色的下半部分显示了`square`函数的主体。它的返回表达式是在上面第一步引入新环境时计算的，绑定`square`的形参名`x`到参数值`-2`上。

环境中框架的顺序影响在表达式中查找名称的返回值。我们之前说过当前环境的名称与该名称计算的值是相关联的。我们现在可以更准确的说：
- 一个名称计算的值绑定到当前环境最早的框架中被找到的该名称上。

我们的环境，名称和函数概念上的框架构成了一个求值模型; 虽然一些细节没有明确规定（例如，绑定是如何实现的），但是我们的模型能够准确地描述解释器如何计算调用表达式。 在第3章中，我们将看到这个模型如何作为实现编程语言的工作解释器的蓝图。

__新的环境特性__：函数应用。

# 1.3.3 示例：调用用户定义的函数

# 1.3.4 本地名称
